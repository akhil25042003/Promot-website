<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prompt Refiner</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React and ReactDOM CDNs -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel Standalone for JSX transformation in browser -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        /* Custom styles for the skyscraper ad text rotation */
        .rotate-text-90 {
            transform: rotate(-90deg);
        }
        /* Ensure the body takes full height for proper centering */
        body {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <!-- Changed script type to "text/babel" for JSX compilation -->
    <script type="text/babel">
        const { useState, useEffect } = React;
        const { createRoot } = ReactDOM;

        function App() {
            const [inputText, setInputText] = useState('');
            const [refinedPrompt, setRefinedPrompt] = useState('');
            const [isLoading, setIsLoading] = useState(false);
            const [error, setError] = useState('');

            const refinePrompt = async () => {
                setError('');
                setRefinedPrompt('');
                setIsLoading(true);

                const prompt = `Rephrase the following common English sentence into a clear, concise, and effective prompt that would yield better and more specific results when used with a large language model. Focus on adding clarity, specifying desired output format (if applicable), and removing ambiguity. Provide only the refined prompt.

Here are some examples of common sentences and their optimized prompts:
Common: "Tell me a joke."
Optimized: "Tell me a funny, clean joke suitable for all ages."
---
Common: "Explain gravity."
Optimized: "Explain the concept of gravity in simple terms for a beginner."
---
Common: "Make a to-do list."
Optimized: "Create a to-do list for a productive Monday morning."
---
Common: "How to cook rice?"
Optimized: "Explain step-by-step how to cook plain white rice for beginners."
---
Common: "Explain photosynthesis"
Optimized: "Explain photosynthesis to a 10-year-old with an example."
---
Common: "What is a black hole?"
Optimized: "Describe what a black hole is using simple language and analogies."
---
Common: "Best places in Goa"
Optimized: "List the top 5 tourist attractions in Goa with descriptions."
---
Common: "3-day trip plan for Paris"
Optimized: "Create a detailed 3-day Paris travel itinerary including food spots."
---
Common: "Diet to lose weight"
Optimized: "Create a 7-day vegetarian weight-loss meal plan for adults."
---
Common: "How to save money?"
Optimized: "Give 5 practical money-saving tips for college students."
---
Common: "What is AI?"
Optimized: "Explain Artificial Intelligence for a high school student."
---
Common: "Give me a quote"
Optimized: "Share a motivational quote by a famous leader."
---

Original Sentence:
"${inputText}"

Optimized Prompt:`;

                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                const payload = { contents: chatHistory };
                // IMPORTANT: Replace "YOUR_GEMINI_API_KEY" with your actual Gemini API Key.
                // You can get one from Google AI Studio: https://aistudio.google.com/app/apikey
                const apiKey = "AIzaSyBEAh_wrNUCoWVOew5Me-VVJ4CpOnnNFd4"; // API Key inserted here
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

                try {
                    let response;
                    let result;
                    let retries = 0;
                    const maxRetries = 5;
                    const baseDelay = 1000;

                    while (retries < maxRetries) {
                        response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });

                        if (response.ok) {
                            result = await response.json();
                            break;
                        } else if (response.status === 429) {
                            const delay = baseDelay * Math.pow(2, retries);
                            await new Promise(resolve => setTimeout(resolve, delay));
                            retries++;
                        } else {
                            const errorData = await response.json();
                            throw new Error(`API Error: ${response.status} - ${errorData.error.message || response.statusText}`);
                        }
                    }

                    if (!response.ok) {
                        throw new Error("Failed to get a response from the API after multiple retries.");
                    }

                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const text = result.candidates[0].content.parts[0].text;
                        setRefinedPrompt(text);
                    } else {
                        setError('Unexpected API response structure. Please try again.');
                    }
                } catch (err) {
                    setError(`Failed to refine prompt: ${err.message}. Please try again.`);
                } finally {
                    setIsLoading(false);
                }
            };

            const copyToClipboard = () => {
                if (refinedPrompt) {
                    const textarea = document.createElement('textarea');
                    textarea.value = refinedPrompt;
                    document.body.appendChild(textarea);
                    textarea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textarea);
                    alert('Refined prompt copied to clipboard!');
                }
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-indigo-50 to-purple-100 flex flex-col items-center p-4 font-sans">
                    {/* Leaderboard Ad (728x90) */}
                    <div className="w-full max-w-[728px] h-[90px] bg-gray-200 flex items-center justify-center text-gray-600 text-sm rounded-lg mb-6 shadow-md">
                        <p>Leaderboard Ad (728x90)</p>
                    </div>

                    <div className="flex flex-col md:flex-row items-start justify-center w-full max-w-screen-xl gap-4">
                        {/* Left Skyscraper Ad (160x600) - Hidden on mobile, shown on medium screens and up */}
                        <div className="hidden md:flex flex-shrink-0 w-[160px] h-[600px] bg-gray-200 items-center justify-center text-gray-600 text-sm rounded-lg shadow-md">
                            <p className="rotate-text-90">Skyscraper Ad (160x600)</p>
                        </div>

                        {/* Main Content Area */}
                        <div className="bg-white p-8 rounded-2xl shadow-xl w-full max-w-2xl border border-gray-200 flex-shrink-0">
                            <h1 className="text-4xl font-extrabold text-center text-gray-800 mb-6 tracking-tight">
                                Prompt Refiner
                            </h1>
                            <p className="text-center text-gray-600 mb-8 text-lg">
                                Transform your everyday sentences into powerful, clear prompts for AI models.
                            </p>

                            <div className="mb-6">
                                <label htmlFor="inputSentence" className="block text-gray-700 text-lg font-semibold mb-2">
                                    Your Sentence:
                                </label>
                                <textarea
                                    id="inputSentence"
                                    className="w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-400 focus:border-transparent transition duration-200 text-gray-800 text-base resize-y min-h-[120px] shadow-sm"
                                    placeholder="E.g., Tell me about dogs."
                                    value={inputText}
                                    onChange={(e) => setInputText(e.target.value)}
                                    rows="4"
                                ></textarea>
                            </div>

                            <button
                                onClick={refinePrompt}
                                className="w-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-3 px-6 rounded-lg text-lg font-bold shadow-lg hover:from-purple-700 hover:to-indigo-700 transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"
                                disabled={isLoading || inputText.trim() === ''}
                            >
                                {isLoading ? (
                                    <div className="flex items-center justify-center">
                                        <svg className="animate-spin h-5 w-5 mr-3 text-white" viewBox="0 0 24 24">
                                            <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                                            <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                        </svg>
                                        Refining...
                                    </div>
                                ) : (
                                    'Refine Prompt'
                                )}
                            </button>

                            {error && (
                                <div className="mt-6 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg text-center shadow-md">
                                    {error}
                                </div>
                            )}

                            {refinedPrompt && (
                                <div className="mt-8 bg-gray-50 p-6 rounded-lg border border-gray-200 shadow-md">
                                    <h2 className="text-2xl font-bold text-gray-800 mb-4 flex items-center">
                                        Refined Prompt:
                                        <button
                                            onClick={copyToClipboard}
                                            className="ml-auto bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-2 px-4 rounded-lg text-sm transition duration-200 flex items-center shadow-sm"
                                            title="Copy to clipboard"
                                        >
                                            <svg className="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 002-2v-1m4 0a2 2 0 012 2v1m-4 0a2 2 0 002 2h2a2 2 0 002-2m-4 0a2 2 0 012-2v-1m-4 0a2 2 0 002 2h2a2 2 0 002-2m-4 0a2 2 0 012-2v-1"></path></svg>
                                            Copy
                                        </button>
                                    </h2>
                                    <p className="text-gray-700 text-base leading-relaxed whitespace-pre-wrap">
                                        {refinedPrompt}
                                    </p>
                                </div>
                            )}
                        </div>

                        {/* Right Skyscraper Ad (160x600) - Hidden on mobile, shown on medium screens and up */}
                        <div className="hidden md:flex flex-shrink-0 w-[160px] h-[600px] bg-gray-200 items-center justify-center text-gray-600 text-sm rounded-lg shadow-md">
                            <p className="rotate-text-90">Skyscraper Ad (160x600)</p>
                        </div>
                    </div>
                </div>
            );
        }

        const container = document.getElementById('root');
        const root = createRoot(container);
        root.render(<App />);
    </script>
</body>
</html>
